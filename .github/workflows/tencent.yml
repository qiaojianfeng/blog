













name: GitHub Actions Build and Deploy tencent
on:
  push:
    branches:
      - master

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:

    - name: 1. git checkout...

      uses: actions/checkout@v1

    - name: 2. setup nodejs...

      uses: actions/setup-node@v1

    - name: 3. install hexo...

      run: |
        npm install

    - name: 4. hexo generate public files...

      run: |
        hexo clean
        hexo g
        
    # 部署到腾讯云    
    - name: Tencent Cloud CLI Action
      # You may pin to the exact commit or the version.
      # uses: TencentCloud/cli-action@fe147b3c1dfc4cc436e4bd5ed044d22b210b49c3
      uses: TencentCloud/cli-action@v1
      with:
    # Tencent cloud secret id. Should be referred to a encrypted environment variable
          secret_id: 	skey-4g62mekb
    # Tencent cloud secret key. Should be referred to a encrypted environment variable
          secret_key: ${{ secrets.SSH_PRIVATE_KEY }}
    # Tencent Cloud product region
          region: 北京
    # Tencent Cloud CLI commands. Mult commands seperate by `&&`
#           commands: cd /www/
    # Data format of command output. Available values are `json`, `table`, `text`. Default is `json`
#           output_format: # optional
